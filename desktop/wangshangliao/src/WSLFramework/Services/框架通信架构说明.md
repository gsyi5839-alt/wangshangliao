# æ—ºå•†èŠæ¡†æ¶é€šä¿¡æ¶æ„è¯´æ˜

## æ¶æ„æ¦‚è¿°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ä¸»æ¡†æ¶ (WangShangLiaoBot)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ConfigSyncManager - é…ç½®åŒæ­¥ç®¡ç†å™¨                                â”‚   â”‚
â”‚  â”‚   â€¢ SyncAllConfigAsync()    - åŒæ­¥å…¨é‡é…ç½®                       â”‚   â”‚
â”‚  â”‚   â€¢ SyncOddsConfigAsync()   - åŒæ­¥èµ”ç‡é…ç½®                       â”‚   â”‚
â”‚  â”‚   â€¢ SyncSealingConfigAsync() - åŒæ­¥å°ç›˜é…ç½®                      â”‚   â”‚
â”‚  â”‚   â€¢ SendLotteryResultAsync() - å‘é€å¼€å¥–ç»“æœ                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ (ä¸‹æ³¨è§£æã€ç»“ç®—è®¡ç®—ã€æ‰˜ç®¡ç­–ç•¥)                            â”‚
â”‚  - ç”¨æˆ·ç•Œé¢ç®¡ç†                                                          â”‚
â”‚  - é…ç½®ç®¡ç† (AppConfig)                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ HPSocket PACK (ç«¯å£14746)
                        â”‚ 
                        â”‚ åŒå‘é€šä¿¡:
                        â”‚ â†“ é…ç½®åŒæ­¥ (SyncFullConfig/SyncOddsConfig/...)
                        â”‚ â†“ å¼€å¥–æ•°æ® (LotteryResult/SealingNotify/...)
                        â”‚ â†“ æ¶ˆæ¯å‘é€ (SendGroupMessage/SendPrivateMessage)
                        â”‚ â†‘ ç¾¤æ¶ˆæ¯è½¬å‘ (ReceiveGroupMessage)
                        â”‚ â†‘ APIå“åº” (ApiResponse)
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å‰¯æ¡†æ¶ (WSLFramework)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ FrameworkServer - HPSocketæœåŠ¡ç«¯ï¼Œæ¥æ”¶ä¸»æ¡†æ¶è¯·æ±‚              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                        â”‚                                         â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚          â–¼             â–¼             â–¼                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚NimDirect  â”‚ â”‚ NIMServiceâ”‚ â”‚ CDPBridge â”‚                      â”‚
â”‚  â”‚Client     â”‚ â”‚ (æ—§SDK)   â”‚ â”‚           â”‚                      â”‚
â”‚  â”‚(ç›´è¿+AES) â”‚ â”‚           â”‚ â”‚           â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚             â”‚             â”‚
         â–¼             â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ—ºå•†èŠ (Electronåº”ç”¨)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ äº‘ä¿¡NIM SDK - æ¶ˆæ¯æ”¶å‘                                        â”‚â”‚
â”‚  â”‚ localStorage/managestate - ç”¨æˆ·ä¿¡æ¯ã€NIM Token                â”‚â”‚
â”‚  â”‚ window.nim - SDKæ¥å£                                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸€ã€ç™»å½•æµç¨‹è¯¦è§£

### 1.1 å®Œæ•´ç™»å½•æ—¶åºå›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”¨æˆ·ç•Œé¢ â”‚     â”‚ ä¸»æ¡†æ¶   â”‚     â”‚ å‰¯æ¡†æ¶   â”‚     â”‚ æ—ºå•†èŠ   â”‚     â”‚ äº‘ä¿¡æœåŠ¡å™¨â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚               â”‚               â”‚               â”‚               â”‚
     â”‚ 1. ç‚¹å‡»ç™»å½•    â”‚               â”‚               â”‚               â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚               â”‚               â”‚
     â”‚               â”‚ 2. å¯åŠ¨å‰¯æ¡†æ¶  â”‚               â”‚               â”‚
     â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚               â”‚
     â”‚               â”‚               â”‚ 3. HPSocketç›‘å¬â”‚               â”‚
     â”‚               â”‚               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚               â”‚
     â”‚               â”‚ 4. è¿æ¥å‰¯æ¡†æ¶  â”‚               â”‚               â”‚
     â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚               â”‚
     â”‚               â”‚               â”‚ 5. Loginæ¶ˆæ¯   â”‚               â”‚
     â”‚               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚               â”‚               â”‚
     â”‚               â”‚               â”‚ 6. CDPè¿æ¥æ—ºå•†èŠâ”‚               â”‚
     â”‚               â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
     â”‚               â”‚               â”‚ 7. è·å–NIM Tokenâ”‚               â”‚
     â”‚               â”‚               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚               â”‚
     â”‚               â”‚               â”‚ 8. NIMç™»å½•     â”‚               â”‚
     â”‚               â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚               â”‚               â”‚ 9. ç™»å½•æˆåŠŸ    â”‚               â”‚
     â”‚               â”‚               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚               â”‚ 10. LoginResultâ”‚               â”‚               â”‚
     â”‚               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚               â”‚               â”‚
     â”‚ 11. ç™»å½•æˆåŠŸ   â”‚               â”‚               â”‚               â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚               â”‚               â”‚               â”‚
```

### 1.2 ç™»å½•æ¶ˆæ¯æ ¼å¼

#### ä¸»æ¡†æ¶ â†’ å‰¯æ¡†æ¶ (Loginè¯·æ±‚)
```json
{
  "Id": "12345678",
  "Type": 1,              // FrameworkMessageType.Login
  "Content": "DESKTOP-ABC", // å®¢æˆ·ç«¯æ ‡è¯† (æœºå™¨å)
  "Timestamp": 1705123456789,
  "Success": true
}
```

#### å‰¯æ¡†æ¶ â†’ ä¸»æ¡†æ¶ (LoginResultå“åº”)
```json
{
  "Id": "12345678",
  "Type": 2,              // FrameworkMessageType.LoginResult
  "Content": "ç™»å½•æˆåŠŸ",
  "Success": true,
  "Error": null,
  "Timestamp": 1705123456800,
  "Extra": "{\"nimId\":\"1628907626\",\"nickname\":\"æµ‹è¯•è´¦å·\",\"groupId\":\"3962369093\"}"
}
```

### 1.3 ç™»å½•åè‡ªåŠ¨åŒæ­¥é…ç½®

ç™»å½•æˆåŠŸåï¼Œä¸»æ¡†æ¶è‡ªåŠ¨æ‰§è¡Œé…ç½®åŒæ­¥ï¼š

```
ä¸»æ¡†æ¶ç™»å½•æˆåŠŸ
  â†’ ConfigSyncManager.SyncAllConfigAsync()
    â†’ SyncBasicConfig (ç¾¤å·ã€ç®¡ç†QQã€wwidã€è°ƒè¯•ç«¯å£)
    â†’ SyncOddsConfig (èµ”ç‡é…ç½®)
    â†’ SyncSealingConfig (å°ç›˜é…ç½®)
    â†’ SyncTemplateConfig (è¯æœ¯æ¨¡æ¿)
    â†’ SyncAutoReplyConfig (è‡ªåŠ¨å›å¤è§„åˆ™)
```

---

## äºŒã€å¼€å§‹ç®—è´¦æµç¨‹

### 2.1 å¼€å§‹ç®—è´¦æ—¶åºå›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”¨æˆ·ç•Œé¢ â”‚     â”‚ ä¸»æ¡†æ¶   â”‚     â”‚ å‰¯æ¡†æ¶   â”‚     â”‚ äº‘ä¿¡æœåŠ¡å™¨â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚               â”‚               â”‚               â”‚
     â”‚ 1. ç‚¹å‡»å¼€å§‹ç®—è´¦â”‚               â”‚               â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚               â”‚
     â”‚               â”‚ 2. StartAccountingæ¶ˆæ¯         â”‚
     â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
     â”‚               â”‚               â”‚ 3. è®¾ç½®æ´»è·ƒç¾¤  â”‚
     â”‚               â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚               â”‚               â”‚ 4. å¯åŠ¨å‘¨æœŸç®¡ç†â”‚
     â”‚               â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚               â”‚               â”‚ 5. å¯åŠ¨å®šæ—¶æœåŠ¡â”‚
     â”‚               â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚               â”‚ 6. è¿”å›æˆåŠŸ    â”‚               â”‚
     â”‚               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚               â”‚
     â”‚ 7. ç•Œé¢æ›´æ–°    â”‚               â”‚               â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚               â”‚               â”‚
     â”‚               â”‚               â”‚               â”‚
     â”‚               â”‚ === è‡ªåŠ¨å‘é€æ¶ˆæ¯æµç¨‹ ===       â”‚
     â”‚               â”‚               â”‚               â”‚
     â”‚               â”‚               â”‚ 8. å€’è®¡æ—¶æ¶ˆæ¯  â”‚
     â”‚               â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚               â”‚               â”‚ 9. å°ç›˜æé†’    â”‚
     â”‚               â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚               â”‚               â”‚ 10. å°ç›˜é€šçŸ¥   â”‚
     â”‚               â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
```

### 2.2 StartAccounting æ¶ˆæ¯æ ¼å¼

#### ä¸»æ¡†æ¶ â†’ å‰¯æ¡†æ¶ (å¼€å§‹ç®—è´¦è¯·æ±‚)
```json
{
  "Id": "abc12345",
  "Type": 60,             // FrameworkMessageType.StartAccounting
  "Content": "3962369093", // ç¾¤å·
  "GroupId": "3962369093",
  "Timestamp": 1705123456789,
  "Success": true
}
```

#### å‰¯æ¡†æ¶ â†’ ä¸»æ¡†æ¶ (å¼€å§‹ç®—è´¦å“åº”)
```json
{
  "Id": "abc12345",
  "Type": 60,
  "Content": "å·²æ¥ç®¡ç¾¤èŠ: 3962369093",
  "Success": true,
  "Error": null,
  "Timestamp": 1705123456800
}
```

---

## ä¸‰ã€æ¶ˆæ¯å‘é€æ ¼å¼è§„èŒƒ

### 3.1 å‘é€ç¾¤æ¶ˆæ¯

#### ä¸»æ¡†æ¶ â†’ å‰¯æ¡†æ¶ (SendGroupMessage)
```json
{
  "Id": "msg00001",
  "Type": 20,             // FrameworkMessageType.SendGroupMessage
  "LoginAccount": "621705120",
  "GroupId": "3962369093",
  "ReceiverId": "3962369093",  // ç¾¤ID
  "Content": "å¤§100 å°50",
  "Timestamp": 1705123456789,
  "ApiName": "å‘é€ç¾¤æ¶ˆæ¯(æ–‡æœ¬ç‰ˆ)",
  "ApiParams": ["621705120", "å¤§100 å°50", "3962369093", "1", "0"]
}
```

#### å‰¯æ¡†æ¶ â†’ ä¸»æ¡†æ¶ (å“åº”)
```json
{
  "Id": "msg00001",
  "Type": 20,
  "Content": "æ¶ˆæ¯å·²å‘é€",
  "Success": true,
  "Timestamp": 1705123456800
}
```

### 3.2 å‘é€ç§èŠæ¶ˆæ¯

#### ä¸»æ¡†æ¶ â†’ å‰¯æ¡†æ¶ (SendPrivateMessage)
```json
{
  "Id": "msg00002",
  "Type": 21,             // FrameworkMessageType.SendPrivateMessage
  "LoginAccount": "621705120",
  "ReceiverId": "1628907626",  // å¯¹æ–¹NIM ID
  "Content": "æ‚¨çš„ä½™é¢: 1000",
  "Timestamp": 1705123456789,
  "ApiName": "å‘é€å¥½å‹æ¶ˆæ¯",
  "ApiParams": ["621705120", "æ‚¨çš„ä½™é¢: 1000", "1628907626"]
}
```

### 3.3 ç¾¤æ“ä½œæ¶ˆæ¯ (ç¦è¨€/è§£ç¦)

#### ä¸»æ¡†æ¶ â†’ å‰¯æ¡†æ¶ (GroupOperation)
```json
{
  "Id": "op00001",
  "Type": 50,             // FrameworkMessageType.GroupOperation
  "LoginAccount": "621705120",
  "GroupId": "3962369093",
  "Content": "ç¦è¨€",      // "ç¦è¨€" æˆ– "è§£ç¦"
  "ApiName": "ww_ç¾¤ç¦è¨€è§£ç¦",
  "ApiParams": ["621705120", "3962369093", "1"]  // 1=ç¦è¨€, 2=è§£ç¦
}
```

---

## å››ã€å¼€å¥–ç›¸å…³æ¶ˆæ¯æ ¼å¼

### 4.1 å¼€å¥–ç»“æœé€šçŸ¥ (LotteryResult)

#### ä¸»æ¡†æ¶ â†’ å‰¯æ¡†æ¶
```json
{
  "Id": "lot00001",
  "Type": 80,             // FrameworkMessageType.LotteryResult
  "Content": "20260113001|2,5,8|15|45",  // æœŸå·|å·ç |å’Œå€¼|å€’è®¡æ—¶
  "Extra": "{\"period\":\"20260113001\",\"num1\":2,\"num2\":5,\"num3\":8,\"sum\":15,\"countdown\":45}",
  "Timestamp": 1705123456789
}
```

### 4.2 å°ç›˜é€šçŸ¥ (SealingNotify)

#### ä¸»æ¡†æ¶ â†’ å‰¯æ¡†æ¶
```json
{
  "Id": "seal00001",
  "Type": 81,             // FrameworkMessageType.SealingNotify
  "Content": "ğŸ”’ å·²å°ç›˜\nç¬¬ 20260113001 æœŸåœæ­¢ä¸‹æ³¨",
  "Extra": "20260113001",  // æœŸå·
  "Timestamp": 1705123456789
}
```

### 4.3 å°ç›˜æé†’ (ReminderNotify)

#### ä¸»æ¡†æ¶ â†’ å‰¯æ¡†æ¶
```json
{
  "Id": "rem00001",
  "Type": 82,             // FrameworkMessageType.ReminderNotify
  "Content": "â° è·ç¦»å°ç›˜è¿˜æœ‰ 30 ç§’",
  "Extra": "{\"period\":\"20260113001\",\"seconds\":30}",
  "Timestamp": 1705123456789
}
```

### 4.4 æœŸå·æ›´æ–° (PeriodUpdate)

#### ä¸»æ¡†æ¶ â†’ å‰¯æ¡†æ¶
```json
{
  "Id": "per00001",
  "Type": 83,             // FrameworkMessageType.PeriodUpdate
  "Content": "20260113001|20260113002|240",  // å½“å‰æœŸ|ä¸‹æœŸ|å€’è®¡æ—¶
  "Extra": "period",
  "Timestamp": 1705123456789
}
```

---

## äº”ã€æ¥æ”¶æ¶ˆæ¯æ ¼å¼

### 5.1 ç¾¤æ¶ˆæ¯æ¥æ”¶ (å‰¯æ¡†æ¶ â†’ ä¸»æ¡†æ¶)

```json
{
  "Id": "rcv00001",
  "Type": 30,             // FrameworkMessageType.ReceiveGroupMessage
  "LoginAccount": "621705120",
  "GroupId": "3962369093",
  "SenderId": "1234567890",
  "Content": "å¤§100",
  "Timestamp": 1705123456789,
  "Extra": "{\"senderNick\":\"ç©å®¶A\",\"messageId\":\"abc123\"}"
}
```

### 5.2 ç§èŠæ¶ˆæ¯æ¥æ”¶ (å‰¯æ¡†æ¶ â†’ ä¸»æ¡†æ¶)

```json
{
  "Id": "rcv00002",
  "Type": 31,             // FrameworkMessageType.ReceivePrivateMessage
  "LoginAccount": "621705120",
  "SenderId": "1234567890",
  "Content": "1",         // æŸ¥è¯¢ä½™é¢
  "Timestamp": 1705123456789,
  "Extra": "{\"senderNick\":\"ç©å®¶A\"}"
}
```

### 5.3 ZCGæ¶ˆæ¯é˜Ÿåˆ—æ ¼å¼

ç”¨äºå…¼å®¹æ—§ç‰ˆZCGåè®®çš„æ¶ˆæ¯æ ¼å¼ï¼š

```
æ¶ˆæ¯é˜Ÿåˆ—:ç™»å½•è´¦å·=621705120â˜…æ“ä½œè´¦å·=1628907626â˜…å‘é€è´¦å·=1234567890â˜…ç¾¤å·=3962369093â˜…å†…å®¹=å¤§100â˜…æ¶ˆæ¯ID=abc123â˜…æ¶ˆæ¯ç±»å‹=1002â˜…æ¶ˆæ¯æ—¶é—´=1705123456789â˜…æ¶ˆæ¯è§£æå=â˜…åŸå§‹æ¶ˆæ¯={"content":...}
```

---

## å…­ã€é…ç½®åŒæ­¥æ¶ˆæ¯æ ¼å¼

### 6.1 åŒæ­¥å…¨é‡é…ç½® (SyncFullConfig)

```json
{
  "Id": "sync00001",
  "Type": 70,             // FrameworkMessageType.SyncFullConfig
  "Content": "{...å®Œæ•´é…ç½®JSON...}",
  "Extra": "full",
  "Timestamp": 1705123456789
}
```

### 6.2 åŒæ­¥èµ”ç‡é…ç½® (SyncOddsConfig)

```json
{
  "Id": "sync00002",
  "Type": 71,
  "Content": "{\"oddsSingle\":1.98,\"oddsDigit\":9.8,\"oddsPair\":2.5,\"oddsStraight\":4.0,\"oddsLeopard\":180}",
  "Extra": "odds",
  "Timestamp": 1705123456789
}
```

### 6.3 åŒæ­¥åŸºæœ¬è®¾ç½® (SyncBasicConfig)

```json
{
  "Id": "sync00003",
  "Type": 76,
  "GroupId": "3962369093",
  "Content": "3962369093|123456789|621705120|9222",  // ç¾¤å·|ç®¡ç†QQ|wwid|è°ƒè¯•ç«¯å£
  "Extra": "basic",
  "Timestamp": 1705123456789
}
```

---

## ä¸ƒã€æ¶ˆæ¯å‘é€ä¼˜å…ˆçº§ä¸å®ç°

### 7.1 å‘é€ä¼˜å…ˆçº§

1. **NimDirectClient (æœ€ä¼˜å…ˆ)**
   - ç›´æ¥TCPè¿æ¥äº‘ä¿¡æœåŠ¡å™¨
   - æ”¯æŒå®Œæ•´AES-256-CBCåŠ å¯†
   - ä¸ä¾èµ–æ—ºå•†èŠUI
   - å‘é€é€Ÿåº¦å¿«ï¼Œç¨³å®šæ€§é«˜

2. **NIMService (å¤‡ç”¨)**
   - é€šè¿‡NIM SDKå‘é€
   - éœ€è¦NIM Token

3. **CDPBridge (æœ€åå¤‡ç”¨)**
   - é€šè¿‡Chrome DevTools Protocol
   - ç›´æ¥æ“ä½œæ—ºå•†èŠElectronåº”ç”¨
   - é€‚ç”¨äºNIMä¸å¯ç”¨æ—¶

### 7.2 NIM SDK å‘é€æ¶ˆæ¯ (å‚è€ƒå®˜æ–¹APIæ–‡æ¡£)

æ ¹æ® `æ—ºå•†èŠå®˜æ–¹APIå®Œæ•´æ–‡æ¡£.md`ï¼Œå‘é€æ¶ˆæ¯é€šè¿‡ NIM SDK å®ç°ï¼š

```javascript
// å‘é€ç¾¤æ¶ˆæ¯
nim.sendText({
    scene: 'team',           // 'p2p'=å•èŠ, 'team'=ç¾¤èŠ
    to: '3962369093',        // ç¾¤ID (NIMå†…éƒ¨ID)
    text: 'æ¶ˆæ¯å†…å®¹',
    done: function(err, msg) {
        if (!err) {
            console.log('å‘é€æˆåŠŸ', msg);
        }
    }
});

// å‘é€è‡ªå®šä¹‰æ¶ˆæ¯ (ç”¨äºç‰¹æ®Šæ ¼å¼)
nim.sendCustomMsg({
    scene: 'team',
    to: 'ç¾¤ID',
    content: JSON.stringify({type: 1, data: {...}}),
    attach: 'é™„åŠ ä¿¡æ¯',
    pushContent: 'æ¨é€å†…å®¹',
    done: function(err, msg) {}
});
```

### 7.3 æ¶ˆæ¯å‘é€ä»£ç å®ç° (C#)

```csharp
// FrameworkServer.cs ä¸­çš„å‘é€å®ç°
private async Task<bool> SendGroupMessageViaCDPAsync(string groupId, string message)
{
    // æ–¹æ¡ˆ1: NIMç›´è¿å®¢æˆ·ç«¯ (æœ€ä¼˜å…ˆ)
    var nimDirect = NimDirectClient.Instance;
    if (nimDirect.IsLoggedIn)
    {
        var result = await nimDirect.SendTeamMessageAsync(groupId, message);
        if (result) return true;
    }

    // æ–¹æ¡ˆ2: NIM SDK (å¤‡ç”¨)
    if (_nimService?.IsLoggedIn == true)
    {
        var result = await _nimService.SendGroupMessageAsync(groupId, message);
        if (result) return true;
    }

    // æ–¹æ¡ˆ3: CDP (æœ€åå¤‡ç”¨)
    if (_cdpBridge?.IsConnected == true)
    {
        return await _cdpBridge.SendGroupMessageAsync(groupId, message);
    }

    return false;
}
```

---

## å…«ã€HPSocket PACK é€šä¿¡åè®®

### 8.1 åŸºæœ¬é…ç½®

```csharp
// å®¢æˆ·ç«¯é…ç½® (FrameworkClient.cs)
_client = new TcpPackClient();
_client.PackHeaderFlag = 0xFF;        // åŒ…å¤´æ ‡å¿—
_client.MaxPackSize = 0x100000;       // æœ€å¤§åŒ…å¤§å° 1MB

// æœåŠ¡ç«¯é…ç½® (FrameworkServer.cs)
_server = new TcpPackServer();
_server.PackHeaderFlag = 0xFF;
_server.MaxPackSize = 0x100000;
```

### 8.2 æ•°æ®åŒ…æ ¼å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HPSocket PACK æ¨¡å¼æ•°æ®åŒ…ç»“æ„                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [åŒ…å¤´æ ‡å¿— 2å­—èŠ‚: 0xFF] [åŒ…ä½“é•¿åº¦ 4å­—èŠ‚] [JSONæ•°æ® Nå­—èŠ‚]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å®é™…å‘é€ç¤ºä¾‹:
0xFF 0xFF 00 00 00 50 {"Id":"12345","Type":1,"Content":"test",...}
```

### 8.3 å¿ƒè·³æœºåˆ¶

```csharp
// å¿ƒè·³é—´éš”: 30ç§’
private System.Timers.Timer _heartbeatTimer = new Timer(30000);

// å¿ƒè·³æ¶ˆæ¯æ ¼å¼
{
  "Id": "hb001",
  "Type": 3,              // FrameworkMessageType.Heartbeat
  "Timestamp": 1705123456789
}

// å¿ƒè·³å“åº” (å‰¯æ¡†æ¶è¿”å›)
{
  "id": 0,
  "code": 0,
  "uid": 9502248           // ç”¨æˆ·ID
}
```

---

## ä¹ã€å…³é”®å¯†é’¥ä¿¡æ¯

### AESåŠ å¯†å¯†é’¥ (æ˜µç§°è§£å¯†)
```
Key: d6ba6647b7c43b79d0e42ceb2790e342 (32å­—èŠ‚)
IV:  kgWRyiiODMjSCh0m (16å­—èŠ‚)
æ¨¡å¼: AES-256-CBC, PKCS7å¡«å……
```

### config.ini AESåŠ å¯† (æ—ºå•†èŠé…ç½®æ–‡ä»¶)
```
KeyåŸæ–‡: 49KdgB8_9=12+3hF
Keyç®—æ³•: SHA256(KeyåŸæ–‡) â†’ 32å­—èŠ‚å¯†é’¥
IV: 00000000000000000000000000000000 (å…¨é›¶16å­—èŠ‚)
æ¨¡å¼: AES-256-CBC, PKCS7å¡«å……
```

### äº‘ä¿¡SDK AppKey
```
45c6af3c98409b18a84451215d0bdd6e
```

## é…ç½®åŒæ­¥æœºåˆ¶

### æ¶ˆæ¯ç±»å‹ (70-89)

| ç±»å‹ | æšä¸¾å€¼ | è¯´æ˜ |
|------|--------|------|
| SyncFullConfig | 70 | åŒæ­¥å…¨é‡é…ç½® |
| SyncOddsConfig | 71 | åŒæ­¥èµ”ç‡é…ç½® |
| SyncSealingConfig | 72 | åŒæ­¥å°ç›˜é…ç½® |
| SyncTrusteeConfig | 73 | åŒæ­¥æ‰˜ç®¡é…ç½® |
| SyncAutoReplyConfig | 74 | åŒæ­¥è‡ªåŠ¨å›å¤ |
| SyncTemplateConfig | 75 | åŒæ­¥è¯æœ¯æ¨¡æ¿ |
| SyncBasicConfig | 76 | åŒæ­¥åŸºæœ¬è®¾ç½® |
| SyncConfigResponse | 79 | é…ç½®åŒæ­¥å“åº” |
| LotteryResult | 80 | å¼€å¥–ç»“æœé€šçŸ¥ |
| SealingNotify | 81 | å°ç›˜é€šçŸ¥ |
| ReminderNotify | 82 | å°ç›˜æé†’ |
| PeriodUpdate | 83 | æœŸå·æ›´æ–° |

### é…ç½®åŒæ­¥æµç¨‹

```
ä¸»æ¡†æ¶é…ç½®å˜æ›´
  â†’ ConfigSyncManager.SyncAllConfigAsync()
  â†’ FrameworkClient.SyncFullConfigAsync(json)
  â†’ HPSocket â†’ å‰¯æ¡†æ¶
  â†’ FrameworkServer.HandleSyncFullConfig()
  â†’ BotConfigSyncService.SyncFromJson()
  â†’ åº”ç”¨åˆ°å„å­æœåŠ¡ (PeriodManager, TimedMessageService, AutoReplyService)
```

### å¼€å¥–æ•°æ®åŒæ­¥æµç¨‹

```
ä¸»æ¡†æ¶LotteryServiceå¼€å¥–
  â†’ ConfigSyncManager.SendLotteryResultAsync()
  â†’ FrameworkClient.SendLotteryResultAsync()
  â†’ HPSocket â†’ å‰¯æ¡†æ¶
  â†’ FrameworkServer.HandleLotteryResult()
  â†’ PeriodManager.UpdateLotteryResult()
  â†’ TimedMessageService.OnLotteryResult()
  â†’ è‡ªåŠ¨å‘é€å¼€å¥–æ¶ˆæ¯åˆ°ç»‘å®šç¾¤
```

## ä¸»è¦æ•°æ®æµ

### 1. ç”¨æˆ·å‘é€æ¶ˆæ¯
```
ä¸»æ¡†æ¶ 
  â†’ FrameworkClient.SendGroupMessageAsync() 
  â†’ HPSocket â†’ å‰¯æ¡†æ¶
  â†’ FrameworkServer.HandleSendGroupMessageAsync()
  â†’ SendGroupMessageViaCDPAsync()
  â†’ NimDirectClient.SendTeamMessageAsync() [ä¼˜å…ˆ]
  â†’ äº‘ä¿¡æœåŠ¡å™¨
```

### 2. æ¥æ”¶æ¶ˆæ¯
```
äº‘ä¿¡æœåŠ¡å™¨ 
  â†’ NimDirectClient.OnMessageReceived
  â†’ FrameworkServer.BroadcastNimMessage()
  â†’ ä¸»æ¡†æ¶ FrameworkClient.OnMessageReceived
  â†’ ChatService.TriggerMessageReceived()
```

### 3. è·å–NIM Token
```
CDPBridge.ConnectAsync()
  â†’ è¿æ¥æ—ºå•†èŠCDP (ç«¯å£9222)
  â†’ æ‰§è¡ŒJS: localStorage.getItem('managestate')
  â†’ è§£æuserInfo.nimId, userInfo.nimToken
  â†’ NimDirectClient.LoginWithTokenAsync()
```

### 4. é…ç½®åŒæ­¥
```
ä¸»æ¡†æ¶ç•Œé¢é…ç½®å˜æ›´
  â†’ ConfigService.SaveConfig()
  â†’ ConfigSyncManager.SyncAllConfigAsync()
  â†’ HPSocket â†’ å‰¯æ¡†æ¶
  â†’ BotConfigSyncService.SyncFromJson()
  â†’ å„å­æœåŠ¡è‡ªåŠ¨æ›´æ–°
```

## ç¾¤å·ç»‘å®šæµç¨‹

1. ç”¨æˆ·åœ¨å‰¯æ¡†æ¶LoginDialogè¾“å…¥ç¾¤å·
2. ä¿å­˜åˆ°ZCGDataStorage
3. NimDirectClient.SetActiveGroup(groupId)
4. TimedMessageService.AddActiveGroup(groupId)

---

## åã€å¼€å§‹ç®—è´¦åçš„ä¸šåŠ¡æ¶ˆæ¯æµç¨‹

### 10.1 å®šæ—¶æ¶ˆæ¯å‘é€ (TimedMessageService)

å¼€å§‹ç®—è´¦åï¼Œå‰¯æ¡†æ¶è‡ªåŠ¨æŒ‰ä»¥ä¸‹æ—¶æœºå‘é€æ¶ˆæ¯ï¼š

```
å¼€å§‹ç®—è´¦
  â”œâ”€â”€ å¯åŠ¨å‘¨æœŸç®¡ç†å™¨ (PeriodManager)
  â”œâ”€â”€ å¯åŠ¨å®šæ—¶æ¶ˆæ¯æœåŠ¡ (TimedMessageService)
  â”‚
  â”‚   æ¯æœŸå¼€å¥–å‘¨æœŸå†… (ä»¥PCè›‹è›‹ä¸ºä¾‹ï¼Œ5åˆ†é’Ÿä¸€æœŸ):
  â”‚   
  â”‚   â”œâ”€â”€ å°ç›˜æé†’ (å€’è®¡æ—¶30ç§’æ—¶)
  â”‚   â”‚   â†’ æ¶ˆæ¯æ ¼å¼: ConfigService.SealRemindContent
  â”‚   â”‚   â†’ ç¤ºä¾‹: "â° è·ç¦»å°ç›˜è¿˜æœ‰ 30 ç§’ï¼ŒæŠ“ç´§ä¸‹æ³¨ï¼"
  â”‚   â”‚
  â”‚   â”œâ”€â”€ å°ç›˜é€šçŸ¥ (å€’è®¡æ—¶0ç§’æ—¶)
  â”‚   â”‚   â†’ æ¶ˆæ¯æ ¼å¼: ConfigService.SealContent
  â”‚   â”‚   â†’ ç¤ºä¾‹: "ğŸ”’ å·²å°ç›˜ï¼Œç¬¬ 20260113001 æœŸåœæ­¢ä¸‹æ³¨"
  â”‚   â”‚   â†’ è§¦å‘ç¾¤ç¦è¨€
  â”‚   â”‚
  â”‚   â”œâ”€â”€ å¼€å¥–é€šçŸ¥ (è·å–å¼€å¥–ç»“æœå)
  â”‚   â”‚   â†’ æ¶ˆæ¯æ ¼å¼: ZCGResponseFormatter.FormatOpenResult()
  â”‚   â”‚   â†’ ç¤ºä¾‹: "ğŸ“¢ ç¬¬ 20260113001 æœŸå¼€å¥–: 2+5+8=15 å°å•"
  â”‚   â”‚   â†’ è§¦å‘ç¾¤è§£ç¦
  â”‚   â”‚
  â”‚   â””â”€â”€ å€’è®¡æ—¶æ’­æŠ¥ (å¯é…ç½®é—´éš”)
  â”‚       â†’ æ¶ˆæ¯æ ¼å¼: ConfigService.CountdownTemplate
  â”‚       â†’ ç¤ºä¾‹: "â±ï¸ ç¬¬ 20260113002 æœŸï¼Œå€’è®¡æ—¶ 240 ç§’"
```

### 10.2 è‡ªåŠ¨å›å¤æ¶ˆæ¯ (AutoReplyService)

æ”¶åˆ°ç¾¤æ¶ˆæ¯åè‡ªåŠ¨å¤„ç†ï¼š

```
æ”¶åˆ°ç¾¤æ¶ˆæ¯
  â”œâ”€â”€ æ£€æŸ¥æ˜¯å¦ä¸ºä¸‹æ³¨æ ¼å¼
  â”‚   â”œâ”€â”€ æ˜¯ â†’ è§£æä¸‹æ³¨ â†’ è¿”å›ç¡®è®¤æ¶ˆæ¯
  â”‚   â”‚   â†’ æ¶ˆæ¯æ ¼å¼: ConfigService.ReplyBetShow
  â”‚   â”‚   â†’ ç¤ºä¾‹: "@ç©å®¶A æ”¶åˆ° å¤§100 å°50"
  â”‚   â”‚
  â”‚   â””â”€â”€ å¦ â†’ æ£€æŸ¥å…³é”®è¯åŒ¹é…
  â”‚       â”œâ”€â”€ åŒ¹é… "æŸ¥" / "1" â†’ è¿”å›ä½™é¢
  â”‚       â”‚   â†’ æ¶ˆæ¯æ ¼å¼: ConfigService.ReplyQuery0Score
  â”‚       â”‚   â†’ ç¤ºä¾‹: "@ç©å®¶A ä½™é¢: 1000"
  â”‚       â”‚
  â”‚       â”œâ”€â”€ åŒ¹é… "å†å²" / "2" â†’ è¿”å›å†å²è®°å½•
  â”‚       â”‚   â†’ ä½¿ç”¨ ZCGFullApiSpec.FormatHistoryResponse()
  â”‚       â”‚
  â”‚       â””â”€â”€ åŒ¹é…è‡ªå®šä¹‰å…³é”®è¯ â†’ è¿”å›å¯¹åº”å›å¤
```

### 10.3 å¼€å¥–ç»“æœå¤„ç†æµç¨‹

```
ä¸»æ¡†æ¶ LotteryService è·å–å¼€å¥–ç»“æœ
  â”‚
  â”œâ”€â”€ 1. å‘é€ LotteryResult æ¶ˆæ¯åˆ°å‰¯æ¡†æ¶
  â”‚   {
  â”‚     "Type": 80,
  â”‚     "Content": "20260113001|2,5,8|15|240",
  â”‚     "Extra": "{\"period\":\"20260113001\",\"num1\":2,\"num2\":5,\"num3\":8,\"sum\":15,\"countdown\":240}"
  â”‚   }
  â”‚
  â”œâ”€â”€ 2. å‰¯æ¡†æ¶å¤„ç† HandleLotteryResult()
  â”‚   â”œâ”€â”€ PeriodManager.UpdateLotteryResult()
  â”‚   â”œâ”€â”€ TimedMessageService.OnLotteryResult()
  â”‚   â””â”€â”€ å‘é€å¼€å¥–æ¶ˆæ¯åˆ°æ´»è·ƒç¾¤
  â”‚
  â””â”€â”€ 3. è§¦å‘ç»“ç®— (ä¸»æ¡†æ¶)
      â”œâ”€â”€ BetSettlementService.SettleBets()
      â””â”€â”€ æ›´æ–°ç©å®¶ä½™é¢
```

### 10.4 æ¶ˆæ¯å†…å®¹æ¨¡æ¿å˜é‡

å¯åœ¨é…ç½®ä¸­ä½¿ç”¨çš„å˜é‡ï¼š

| å˜é‡ | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|------|------|--------|
| `[æ˜µç§°]` | ç©å®¶æ˜µç§° | ç©å®¶A |
| `[çŸ­ID]` | ç©å®¶IDå4ä½ | 7890 |
| `{ä½™ç²®}` | ç©å®¶ä½™é¢ | 1000 |
| `{æœŸå·}` | å½“å‰æœŸå· | 20260113001 |
| `{å€’è®¡æ—¶}` | å‰©ä½™ç§’æ•° | 240 |
| `{å·ç }` | å¼€å¥–å·ç  | 2+5+8=15 |
| `{ç»“æœ}` | å¤§å°å•åŒ | å°å• |

---

## åä¸€ã€æ•…éšœæ’æŸ¥

### CDPè¿æ¥å¤±è´¥
- ç¡®è®¤æ—ºå•†èŠå·²å¯åŠ¨
- ç¡®è®¤å¯åŠ¨å‚æ•°åŒ…å« `--remote-debugging-port=9222`

### NIMç™»å½•å¤±è´¥
- æ£€æŸ¥æ—ºå•†èŠæ˜¯å¦å·²ç™»å½•
- æ£€æŸ¥NIM Tokenæ˜¯å¦è¿‡æœŸ
- å°è¯•ä»CDPé‡æ–°è·å–Token

### æ¶ˆæ¯å‘é€å¤±è´¥
- æ£€æŸ¥ç¾¤å·æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥NIMè¿æ¥çŠ¶æ€
- æŸ¥çœ‹æ—¥å¿—ç¡®è®¤ä½¿ç”¨çš„å‘é€æ–¹å¼

### å‰¯æ¡†æ¶æœªæ”¶åˆ°æ¶ˆæ¯
- æ£€æŸ¥HPSocketè¿æ¥çŠ¶æ€
- ç¡®è®¤ç«¯å£14746æœªè¢«å ç”¨
- æŸ¥çœ‹ä¸»æ¡†æ¶æ—¥å¿—ç¡®è®¤æ¶ˆæ¯å·²å‘é€

### å¼€å§‹ç®—è´¦åæ— å“åº”
- ç¡®è®¤ç¾¤å·å·²æ­£ç¡®é…ç½®
- æ£€æŸ¥æ´»è·ƒç¾¤åˆ—è¡¨æ˜¯å¦åŒ…å«ç›®æ ‡ç¾¤
- æŸ¥çœ‹TimedMessageServiceæ—¥å¿—

---

## åäºŒã€å®Œæ•´æ¶ˆæ¯ç±»å‹æšä¸¾

```csharp
public enum FrameworkMessageType
{
    // è¿æ¥ç®¡ç† (1-9)
    Login = 1,              // ç™»å½•è¯·æ±‚
    LoginResult = 2,        // ç™»å½•å“åº”
    Heartbeat = 3,          // å¿ƒè·³
    
    // APIè°ƒç”¨ (10-19)
    ApiRequest = 10,        // APIè¯·æ±‚
    ApiResponse = 11,       // APIå“åº”
    
    // æ¶ˆæ¯å‘é€ (20-29)
    SendGroupMessage = 20,  // å‘é€ç¾¤æ¶ˆæ¯
    SendPrivateMessage = 21, // å‘é€ç§èŠæ¶ˆæ¯
    
    // æ¶ˆæ¯æ¥æ”¶ (30-39)
    ReceiveGroupMessage = 30,  // æ”¶åˆ°ç¾¤æ¶ˆæ¯
    ReceivePrivateMessage = 31, // æ”¶åˆ°ç§èŠæ¶ˆæ¯
    
    // æ¶ˆæ¯é˜Ÿåˆ— (40-49)
    MessageQueue = 40,      // ZCGæ ¼å¼æ¶ˆæ¯é˜Ÿåˆ—
    
    // ç¾¤æ“ä½œ (50-59)
    GroupOperation = 50,    // ç¾¤æ“ä½œ (ç¦è¨€/è§£ç¦)
    
    // ç®—è´¦æ§åˆ¶ (60-69)
    StartAccounting = 60,   // å¼€å§‹ç®—è´¦
    StopAccounting = 61,    // åœæ­¢ç®—è´¦
    SetActiveGroup = 62,    // è®¾ç½®æ´»è·ƒç¾¤
    
    // é…ç½®åŒæ­¥ (70-79)
    SyncFullConfig = 70,    // åŒæ­¥å…¨é‡é…ç½®
    SyncOddsConfig = 71,    // åŒæ­¥èµ”ç‡
    SyncSealingConfig = 72, // åŒæ­¥å°ç›˜è®¾ç½®
    SyncTrusteeConfig = 73, // åŒæ­¥æ‰˜ç®¡é…ç½®
    SyncAutoReplyConfig = 74, // åŒæ­¥è‡ªåŠ¨å›å¤
    SyncTemplateConfig = 75, // åŒæ­¥è¯æœ¯æ¨¡æ¿
    SyncBasicConfig = 76,   // åŒæ­¥åŸºæœ¬è®¾ç½®
    SyncConfigResponse = 79, // é…ç½®åŒæ­¥å“åº”
    
    // å¼€å¥–ç›¸å…³ (80-89)
    LotteryResult = 80,     // å¼€å¥–ç»“æœ
    SealingNotify = 81,     // å°ç›˜é€šçŸ¥
    ReminderNotify = 82,    // å°ç›˜æé†’
    PeriodUpdate = 83,      // æœŸå·æ›´æ–°
    
    // CDPå‘½ä»¤ (100-109)
    CDPCommand = 100,       // CDPå‘½ä»¤
    CDPResponse = 101,      // CDPå“åº”
    
    // é”™è¯¯ (999)
    Error = 999             // é”™è¯¯
}
```
