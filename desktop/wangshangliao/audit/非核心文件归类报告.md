## 非核心文件归类报告（覆盖但不逐行精读）

目标：在不遗漏任何文件的前提下，把“非核心但仍需覆盖”的文件按职责归类，便于你快速定位、也便于后续逐步把 `审计清单.csv` 的 `review_status` 全部从 `pending` 变成 `reviewed/skip`。

（核心链路已单独见 `核心链路审计报告.md`）

---

## 1. 覆盖范围与规模

基于全量扫描：`desktop/wangshangliao` 下共有 **10263** 个文件，主要分布：
- `src/`：6640（其中 `.cs` 256，另含大量 `.txt`/缓存/日志/数据库等运行数据）
- `libs/`：3164（主要是三方库源码/工程文件，`.h/.cpp/.vcxproj` 为主）
- 根目录 `./`：283（脚本、文档、抓包/分析工具、若干解决方案等）
- `dist/`：17（分发产物/配置/依赖）
- 其余多为资源图片、示例项目等

---

## 2. 文件类别与建议审阅策略

### 2.1 三方库（通常“覆盖即可”，除非你要改底层通信库）

- **`libs/HP-Socket/`**
  - 内容：大量 `.h/.cpp/.vcxproj/.sln`、脚本、不同平台 Demo
  - 职责：HPSocket 低层网络库（C/C++）与多平台工程
  - 建议：默认标记 `skip(third_party)`；只在网络包/性能/兼容性问题时深入

- **`EasyHook/`**
  - 内容：C# 项目（注入/Hook 相关）
  - 职责：进程注入/Hook 基础设施（与示例 `ChatAutoBot*` 联动）
  - 建议：如果你当前实际运行走的是“副框架 + 主框架”模式，可以先归类为 `optional`；若要研究 Hook 模式再精读

---

### 2.2 分发产物与运行时依赖（看配置/可执行文件命名/依赖即可）

- **`dist/WSLFramework/`**
  - 内容：`WSLFramework.exe`、`旺商聊框架.exe.config`、`HPSocket*.dll`、`Plugin.ini`、`config.ini`、`端口.ini`、日志等
  - 职责：可直接运行的副框架打包目录
  - 建议：重点核对“EXE 名称/端口/配置项/插件加载方式”，二进制本体不需要文本精读

---

### 2.3 启动/编译/维护脚本（需要“读并理解”，但不需要逐行推演业务）

根目录常见：
- `startup.cmd / run.cmd / stop.cmd / restart.cmd / status.cmd`
- `build.cmd / rebuild.cmd`
- `启动旺商聊调试模式.cmd`（开启 CDP 9222）

建议：对“启动顺序/参数/端口/管理员权限要求/路径假设”做一次结构化记录即可（已在核心报告里覆盖启动链路要点）。

---

### 2.4 抓包/监控/分析类脚本（工具链）

根目录存在大量 `.ps1/.bat/.js/.py`（如 `capture_traffic.ps1`、`monitor_*.ps1`、`analyze_*.js` 等）：
- 职责：协议抓取、接口探索、消息监控、自动化测试
- 建议：按“用途”分组（抓包/监控/探索/测试/生成报告），做索引；仅对你当前调试路径相关的脚本精读

---

### 2.5 文档与逆向材料（作为“协议/行为依据”）

典型目录/文件：
- `docs/` 与 `src/WSLFramework/Services/*.md`（协议、官方 API、深度连接协议、架构说明等）
- 根目录各类 `*.md` 指南

建议：以“协议版本/端口/字段格式/成功返回值/加解密规则”做摘要，不需要逐段复述全文。

---

### 2.6 资源与 UI 配置（图片/模板/配置面板资源）

如 `TUP/`、`回水工具/`、大量 `.png/.ico/.resx`：
- 职责：界面资源/活动素材/配置面板
- 建议：归类记录即可；只有在 UI/生成图片/模板变量问题时再深入

---

### 2.7 `src/` 内的“非核心”运行数据（需要区分源码 vs 数据）

你扫描结果显示 `src/` 下 `.txt` 极多（6211），还包含 `.log/.db/.cache/.nim_mmap` 等：
- 这些通常是 **运行时数据、日志、缓存、数据库快照**，不是源码
- 建议：统一归类为 `runtime_data`，避免与源码混淆；必要时只挑与 bug 复现相关的数据分析

---

## 3. 下一步：把“归类”落实到审计清单

我建议把 `审计清单.csv` 的 `review_status` 规范化为以下几种（便于筛选）：
- `reviewed`：已精读/已理解职责
- `indexed`：已确认用途/归类，但未逐行精读
- `skip(third_party)`：确认是三方库，不精读
- `skip(binary)`：二进制产物（exe/dll/pdb 等）
- `runtime_data`：运行数据（log/db/cache/txt dump 等）

如果你同意，我下一步会按上述规则自动批量标记（不改任何源码，只更新 `审计清单.csv` 的状态和 notes），并输出“剩余 pending 清单”。

